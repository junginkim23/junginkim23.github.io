---
title : "[Data Science] - project"
category :
    - Data Science 
tag : 
    - project
    - Data Analysis
author_profile : true
sidebar_main : False  
toc : true 
use_math: true
---

# DS_project

#### 🏆반드시 들어가야 하는 내용
1. 지역에 따라서 선호하는 게임 장르가 다를까 라는 질문에 대답을 하셔야합니다.
2. 연도별 게임의 트렌드가 있을까 라는 질문에 대답을 하셔야합니다.
3. 출고량이 높은 게임에 대한 분석 및 시각화 프로세스가 포함되어야 합니다.


#### ※Data Description
- Name : 게임의 이름입니다.
- Platform : 게임이 지원되는 플랫폼의 이름입니다.
- Year : 게임이 출시된 연도입니다.
- Genre : 게임의 장르입니다.
- Publisher : 게임을 제작한 회사입니다.
- NA_Sales : 북미지역에서의 출고량입니다.
- EU_Sales : 유럽지역에서의 출고량입니다.
- JP_Sales : 일본지역에서의 출고량입니다.
- Other_Sales : 기타지역에서의 출고량입니다.


#### 목표: 다음 분기에 어떤 게임을 설계해야 할까?
- 최근 5년동안 게임 장르별로 추이를 보면서 성적이 떨어진것이 무엇이고 상승하고 있는게 무엇인지 확인! 
- 이 장르가 신선해서 특히 해당 장르의 어떤 게임이 이 장르의 게임에 큰 기여를 해서 상승 곡선 그래프를 만들고 있다.
- 어떤 게임이 하락세를 타고 유저도 많이 빠지고 있어, 그래서 전체적인 그 장르가 하향 곡선을 그리고 있다.


#### 코드
1. 전처리
```py
import pandas as pd 
import numpy as np

#1.전처리
df = pd.read_csv('/content/drive/MyDrive/vgames2.csv')

#데이터 타입 확인
df.dtypes #sales feature type을 모두 numerical로 변환해야겠다.

#output
Unnamed: 0       int64
Name            object
Platform        object
Year           float64
Genre           object
Publisher       object
NA_Sales        object
EU_Sales        object
JP_Sales        object
Other_Sales     object
dtype: object

#결측값 확인
#dataframe.isna : 결측 값은 True를 그 외의 값은 False를 반환, dataframe.notna : 결측 값은 False를 그 외에는 True 반환
df.isnull().sum() # Year, Genre, Publisher에 결측값 존재함을 확인 

#output
Unnamed: 0       0
Name             0
Platform         0
Year           271
Genre           50
Publisher       58
NA_Sales         0
EU_Sales         0
JP_Sales         0
Other_Sales      0
dtype: int64

#결측값이 포함되어 있는 행 제거
df = df.dropna()

#인덱스 정렬, 및 Unnamed 컬럼 제거
df = df.drop('Unnamed: 0',axis = 1)
df.index = np.arange(1,16242)

#Year 컬럼 전처리 
df_Year_confirm = df[df.Year<1980]
df_Year_confirm[df_Year_confirm.Year >50] 
df_Year_confirm[df_Year_confirm.Year >50].Year.unique() #output: array([97., 96., 98., 86., 95., 94.]) -> 1900년도의 형태로 바꿔주자.
df[df.Year<17].Year.unique() #output: array([ 9., 11., 15.,  3.,  6.,  8.,  1.,  5.,  4., 10.,  7., 16., 14.,2., 13.,  0., 12.])
def change_year(x):
  if x < 1980 and x >50 :
    return x + 1900
  elif x < 17:
    return x + 2000
  else:
    return x

df.Year = df.Year.apply(change_year)
df.Year.unique()

#output
array([2008., 2009., 2010., 2005., 2011., 2007., 2001., 2003., 2006.,
       2014., 2015., 2002., 1997., 2013., 1996., 2004., 2000., 1984.,
       1998., 2016., 1985., 1999., 1995., 1993., 2012., 1987., 1982.,
       1994., 1990., 1992., 1991., 1983., 1988., 1981., 1989., 1986.,
       2017., 1980., 2020.])

#sales 컬럼들 전처리
#컬럼에 있는 k, m 처리

sales = df.columns[5:].values

#k,m -> 10*3, 10*6 치환
for sale in sales:
  df[sale] = (df[sale].replace(r'[KM]+$', '', regex=True).astype(float) * \
              df[sale].str.extract(r'[\d\.]+([KM]+)', expand=False).fillna(1).replace(['K','M'], [10**3, 10**6]).astype(int))       
```